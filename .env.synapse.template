# ===========================================
# WorkAdventure + LiveKit + Synapse Config
# ===========================================
# SECURITY: chmod 600 .env after editing!
#
# This version includes Matrix/Synapse for persistent chat.
# Requires: 12+ GB RAM, 80+ GB storage

# -------------------------------------------
# REQUIRED - Generate before deployment
# -------------------------------------------

# Your domain (e.g., example.com)
DOMAIN=example.com

# Your server's PUBLIC IP address (REQUIRED for WebRTC)
# Get it with: curl -4 ifconfig.me
PUBLIC_IP=

# WorkAdventure version (v1.27.2+ fixes audio bugs, requires v1.21.0+ for Matrix)
VERSION=v1.27.2

# LiveKit version
LIVEKIT_VERSION=v1.8.0

# Secret key for JWT signing (REQUIRED)
# Generate: openssl rand -hex 32
SECRET_KEY=

# LiveKit API credentials (REQUIRED)
# Generate key: openssl rand -hex 12
# Generate secret: openssl rand -base64 32
LIVEKIT_API_KEY=
LIVEKIT_API_SECRET=

# LiveKit WebSocket URL (REQUIRED - must use wss://)
LIVEKIT_URL=wss://livekit.example.com

# Redis password (REQUIRED)
# Generate: openssl rand -base64 24
REDIS_PASSWORD=

# PostgreSQL password for Synapse (REQUIRED)
# Generate: openssl rand -base64 24
POSTGRES_PASSWORD=

# Matrix/Synapse credentials (REQUIRED)
MATRIX_ADMIN_USER=admin
# Generate: openssl rand -base64 16
MATRIX_ADMIN_PASSWORD=
# Generate: openssl rand -hex 32
MATRIX_REGISTRATION_SECRET=

# Map storage credentials (REQUIRED)
MAP_STORAGE_USER=admin
# Generate: openssl rand -base64 16
MAP_STORAGE_PASSWORD=

# Email for Let's Encrypt certificates (REQUIRED)
ACME_EMAIL=admin@example.com

# -------------------------------------------
# OPTIONAL - Defaults provided
# -------------------------------------------

# Maximum users per room (default: 50)
MAX_USERS_PER_ROOM=50

# Enable anonymous access (default: true)
ENABLE_ANONYMOUS=true

# -------------------------------------------
# OIDC Configuration (Optional)
# -------------------------------------------
# ENABLE_OPENID=true
# OPENID_CLIENT=workadventure
# OPENID_SECRET=your-oidc-secret
# OPENID_ISSUER=https://auth.example.com/realms/your-realm

# -------------------------------------------
# Email/SMTP for Synapse Notifications (Optional)
# -------------------------------------------
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=notifications@example.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=WorkAdventure <noreply@example.com>
