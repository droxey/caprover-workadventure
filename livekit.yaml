# LiveKit Server Configuration
# Security-hardened for production use

port: 7880
bind_addresses:
  - 0.0.0.0

rtc:
  # TCP port for WebRTC (fallback when UDP blocked)
  tcp_port: 7881
  # UDP port range for WebRTC media
  port_range_start: 50000
  port_range_end: 50100
  # Use external IP for NAT traversal
  use_external_ip: true
  # Enable ICE-lite for better compatibility
  enable_loopback_candidate: false

# Redis for distributed state (if clustering)
redis:
  address: redis:6379
  password: "${REDIS_PASSWORD}"
  db: 0

# Room settings
room:
  # Auto-create rooms
  enabled_codecs:
    - mime: audio/opus
    - mime: video/VP8
    - mime: video/H264
  max_participants: 50
  empty_timeout: 300
  departure_timeout: 30

# Logging
logging:
  level: info
  # Structured logging for better parsing
  json: true
  # Don't log PII
  sample: false

# Security settings
keys:
  # API key/secret loaded from environment
  # Format: "key: secret"
  # Set via LIVEKIT_KEYS environment variable

# Limits for DoS protection
limit:
  # Max room participants
  num_tracks: 50
  # Connection limits per room
  max_participant_bitrate: 3000000
  # Subscription limits
  subscription_limit_video: 25
  subscription_limit_audio: 100

# Webhook configuration (optional)
# webhook:
#   urls:
#     - https://your-backend/webhook
#   api_key: your_api_key

# Turn server configuration
# Using LiveKit's embedded TURN
turn:
  enabled: true
  # Domain for TURN/TLS
  domain: ""
  # Ports
  tls_port: 5349
  udp_port: 3478
